import{q as L}from"./question-ChUrMfMN.js";import{C as D,E as F}from"./EssayQuestionCard-DpvZ_s1B.js";import{_ as U,r,j as G,o as M,a as Q,b as y,c as a,w as n,k as h,d as c,e as k,h as d,t as P,l as H,g as $,i as J}from"./index-BYh7zG4k.js";const K={class:"sequential-practice"},O={class:"header"},R={class:"content"},W={class:"navigation"},X={__name:"SequentialPractice",setup(Y){const p=r(0),v=r([]),s=r(0),w=r(!1),m=r(0),o=r(1),N=r(10),B=t=>{var x,C,f,l,b;if(!t)return null;const e=[];return["A","B","C","D","E","F","G"].forEach((i,I)=>{const T=5+I*3;t[`param${T}Text`]===i&&t[`param${T+2}Text`]&&e.push({label:i,content:t[`param${T+2}Text`].replace(/^"(.+)"$/,"$1")})}),{id:t.id,content:t.question,options:e,answer:t.answer,analysis:((C=(x=t.param23Text)==null?void 0:x.replace("本题得分：",""))==null?void 0:C.trim())||"",type:(f=t.param2Text)!=null&&f.includes("多选")?"multiple":"single",score:((b=(l=t.param3Text)==null?void 0:l.match(/\d+/))==null?void 0:b[0])||0}},g=G(()=>!v.value||v.value.length===0?null:v.value[s.value]),_=async()=>{var t;w.value=!0,v.value=[],m.value=0,s.value=0;try{const e=await L.getQuestionList({type:p.value,current:o.value,size:N.value});console.log("获取题目:",e),(t=e==null?void 0:e.items)!=null&&t.records&&Array.isArray(e.items.records)?(v.value=e.items.records,m.value=e.items.records.length):h.warning("没有找到题目")}catch(e){console.error("获取题目失败:",e),h.error("获取题目失败")}finally{w.value=!1}},E=()=>{_()},A=t=>{const e=g.value;if(e)if(p.value===0){const u=Array.isArray(t)?t.sort().join(",")===e.answer.split(",").sort().join(","):t===e.answer;h[u?"success":"error"](u?"回答正确！":`回答错误，正确答案是：${e.answer}`)}else h.success("提交成功")},S=()=>{s.value<m.value-1&&s.value++},V=()=>{s.value>0&&s.value--},j=()=>{o.value>1&&(o.value--,_())},q=()=>{o.value++,_()},z=()=>{o.value=1,_()};return M(()=>{_()}),(t,e)=>{const u=c("a-select-option"),x=c("a-select"),C=c("a-input-number"),f=c("a-space"),l=c("a-button"),b=c("a-spin");return k(),Q("div",K,[y("div",O,[a(f,null,{default:n(()=>[a(x,{value:p.value,"onUpdate:value":e[0]||(e[0]=i=>p.value=i),style:{width:"120px"},onChange:E},{default:n(()=>[a(u,{value:0},{default:n(()=>e[2]||(e[2]=[d("选择题")])),_:1}),a(u,{value:1},{default:n(()=>e[3]||(e[3]=[d("简答题")])),_:1})]),_:1},8,["value"]),y("span",null,"当前进度："+P(s.value+1)+"/"+P(m.value),1),a(C,{value:N.value,"onUpdate:value":e[1]||(e[1]=i=>N.value=i),min:1,max:100,style:{width:"90px"},"addon-after":"条/页",onChange:z},null,8,["value"]),y("span",null,"第"+P(o.value)+"页",1)]),_:1})]),y("div",R,[a(b,{spinning:w.value},{default:n(()=>[g.value?(k(),Q(H,{key:0},[p.value===0?(k(),$(D,{key:0,question:B(g.value),onSubmit:A,onNext:S},null,8,["question"])):(k(),$(F,{key:1,question:g.value,onSubmit:A,onNext:S},null,8,["question"]))],64)):J("",!0),y("div",W,[a(f,null,{default:n(()=>[a(l,{disabled:o.value===1,onClick:j},{default:n(()=>e[4]||(e[4]=[d(" 上一页 ")])),_:1},8,["disabled"]),a(l,{disabled:s.value===0,onClick:V},{default:n(()=>e[5]||(e[5]=[d(" 上一题 ")])),_:1},8,["disabled"]),a(l,{disabled:s.value===m.value-1,type:"primary",onClick:S},{default:n(()=>e[6]||(e[6]=[d(" 下一题 ")])),_:1},8,["disabled"]),a(l,{type:"primary",onClick:q},{default:n(()=>e[7]||(e[7]=[d(" 下一页 ")])),_:1})]),_:1})])]),_:1},8,["spinning"])])])}}},ae=U(X,[["__scopeId","data-v-9e938dbc"]]);export{ae as default};
