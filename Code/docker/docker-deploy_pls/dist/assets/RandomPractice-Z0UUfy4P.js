import{C as D,E as I}from"./EssayQuestionCard-DpvZ_s1B.js";import{q as V}from"./question-ChUrMfMN.js";import{c as r,I as M,_ as F,r as x,a as j,b as w,w as i,k as C,d,e as h,h as O,u as $,t as k,l as z,g as A,i as L}from"./index-BYh7zG4k.js";var U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};function B(s){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?Object(arguments[a]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable}))),n.forEach(function(l){G(s,l,o[l])})}return s}function G(s,a,o){return a in s?Object.defineProperty(s,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[a]=o,s}var q=function(a,o){var n=B({},a,o.attrs);return r(M,B({},n,{icon:U}),null)};q.displayName="RedoOutlined";q.inheritAttrs=!1;const H={class:"random-practice"},J={class:"header"},W={class:"content"},X={__name:"RandomPractice",setup(s){const a=x(0),o=x(0),n=x(null),l=x(!1),E=t=>{var u,v,_,y,m;if(!t)return null;const e=t.item||t,c=[];return[{label:"A",content:e.param7Text},{label:"B",content:e.param10Text},{label:"C",content:e.param13Text},{label:"D",content:e.param16Text},{label:"E",content:e.param19Text},{label:"F",content:e.param22Text}].forEach(({label:g,content:f})=>{f&&c.push({label:g,content:f})}),{id:e.id,content:e.question||"",options:c,answer:e.answer||"",analysis:((v=(u=e.param23Text)==null?void 0:u.replace("本题得分：",""))==null?void 0:v.trim())||"",type:(_=e.param2Text)!=null&&_.includes("多选")?"multiple":"single",score:parseInt(((m=(y=e.param3Text)==null?void 0:y.match(/\d+/))==null?void 0:m[0])||"1")}},P=t=>{if(!t)return null;const e=t.item||t;return{id:e.id,content:e.question||"",answer:e.answer||"",analysis:e.analysis||"",score:e.score||0,type:"essay"}},T=async()=>{l.value=!0;try{console.log("请求类型:",a.value);const t=await V.getRandomQuestion(a.value);if(n.value=t,console.log("原始数据:",t),!t){C.error("没有更多题目了");return}console.log("格式化后的数据:",a.value===0?E(t):P(t))}catch(t){console.error("获取题目失败:",t),C.error("获取题目失败")}finally{l.value=!1}},N=()=>{o.value=0,T()},Q=t=>{var c;const e=((c=n.value)==null?void 0:c.item)||n.value;if(e){if(a.value===0){const p=e.answer||"",u=Array.isArray(t)?t.sort().join(",")===p.split(",").sort().join(","):t===p;C[u?"success":"error"](u?"回答正确！":`回答错误，正确答案是：${p}`)}else C.success("提交成功");o.value++}};return T(),(t,e)=>{const c=d("a-select-option"),p=d("a-select"),u=d("a-button"),v=d("a-tag"),_=d("a-space"),y=d("a-spin");return h(),j("div",H,[w("div",J,[r(_,null,{default:i(()=>{var m,g,f;return[r(p,{value:a.value,"onUpdate:value":e[0]||(e[0]=b=>a.value=b),style:{width:"120px"},onChange:N},{default:i(()=>[r(c,{value:0},{default:i(()=>e[1]||(e[1]=[O("选择题")])),_:1}),r(c,{value:1},{default:i(()=>e[2]||(e[2]=[O("简答题")])),_:1})]),_:1},8,["value"]),r(u,{type:"primary",onClick:T},{icon:i(()=>[r($(q))]),default:i(()=>[e[3]||(e[3]=O(" 换一题 "))]),_:1}),r(v,{color:(f=(g=(m=n.value)==null?void 0:m.item)==null?void 0:g.param2Text)!=null&&f.includes("多选")?"purple":"blue"},{default:i(()=>{var b,R,S;return[O(k((S=(R=(b=n.value)==null?void 0:b.item)==null?void 0:R.param2Text)!=null&&S.includes("多选")?"多选题":"单选题"),1)]}),_:1},8,["color"]),w("span",null,"已答题数："+k(o.value),1)]}),_:1})]),w("div",W,[r(y,{spinning:l.value},{default:i(()=>[n.value?(h(),j(z,{key:0},[a.value===0?(h(),A(D,{key:0,question:E(n.value),onSubmit:Q},null,8,["question"])):(h(),A(I,{key:1,question:P(n.value),onSubmit:Q},null,8,["question"]))],64)):L("",!0)]),_:1},8,["spinning"])])])}}},ee=F(X,[["__scopeId","data-v-615430e3"]]);export{ee as default};
